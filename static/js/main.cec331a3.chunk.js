(this["webpackJsonpmine-game"]=this["webpackJsonpmine-game"]||[]).push([[0],{37:function(e,a,t){e.exports=t(49)},42:function(e,a,t){},43:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(13),c=t.n(r),o=(t(42),t(64)),u=(t(43),t(4)),i={BUILD:"BUILD",CLICKED:"CLICKED",RIGHT_CLICKED:"RIGHT_CLICKED",REDUCE_MINE_LEFT:"REDUCE_MINE_LEFT",INCREASE_MINE_LEFT:"INCREASE_MINE_LEFT",CHECK_CELL:"CHECK_CELL",RESET:"RESET",EMPTY:"EMPTY",SAVE_CHANGE:"SAVE_CHANGE",CHANGE_LEVEL:"CHANGE_LEVEL",CHANGE_SIZE:"CHANGE_SIZE",RESTART_GAME:"RESTART_GAME",FAILED:"FAILED",FINISH:"FINISH"},s=function(e){var a=e.split("|");return{type:i.CLICKED,action:a}},m=function(e){var a=e.split("|");return{type:i.RIGHT_CLICKED,action:a}},v=function(){return{type:i.REDUCE_MINE_LEFT}},f=function(){return{type:i.INCREASE_MINE_LEFT}},E=function(e,a){b(e.id,a)},b=function(e,a){var t=e.split("|"),n=parseInt(t[0]),l=parseInt(t[1]),r=a;if(0===a[t[0]][t[1]].value&&1!==a[t[0]][t[1]].mark){try{r[n-1][l].open||1===r[n-1][l].mark||(r[n-1][l].open=!0,0===r[n-1][l].value&&E(r[n-1][l],r))}catch(c){}try{r[n+1][l].open||1===r[n+1][l].mark||(r[n+1][l].open=!0,0===r[n+1][l].value&&E(r[n+1][l],r))}catch(c){}try{r[n][l-1].open||1===r[n][l-1].mark||(r[n][l-1].open=!0,0===r[n][l-1].value&&E(r[n][l-1],r))}catch(c){}try{r[n][l+1].open||1===r[n][l+1].mark||(r[n][l+1].open=!0,0===r[n][l+1].value&&E(r[n][l+1],r))}catch(c){}try{r[n-1][l-1].open||1===r[n-1][l-1].mark||(r[n-1][l-1].open=!0,0===r[n-1][l-1].value&&E(r[n-1][l-1],r))}catch(c){}try{r[n-1][l+1].open||1===r[n-1][l+1].mark||(r[n-1][l+1].open=!0,0===r[n-1][l+1].value&&E(r[n-1][l+1],r))}catch(c){}try{r[n+1][l+1].open||1===r[n+1][l+1].mark||(r[n+1][l+1].open=!0,0===r[n+1][l+1].value&&E(r[n+1][l+1],r))}catch(c){}try{r[n+1][l-1].open||1===r[n+1][l-1].mark||(r[n+1][l-1].open=!0,0===r[n+1][l-1].value&&E(r[n+1][l-1],r))}catch(c){}}else if(a[t[0]][t[1]].value>=15&&1!==a[t[0]][t[1]].mark)return{type:i.FAILED};return{type:i.CHECK_CELL,payload:r}},d=function(e,a){for(var t=1===a?Math.floor(.12*e*e):2===a?Math.floor(.2*e*e):Math.floor(.3*e*e),n=[],l=t,r=0;r<e;r++){n[r]=[];for(var c=0;c<e;c++)n[r][c]={id:"".concat(r,"|").concat(c),mine:!1,open:!1,value:0,mark:0}}for(;!(l<=1);){var o=Math.floor(Math.random()*e),u=Math.floor(Math.random()*e);n[o][u].mine||(n[o][u]={id:"".concat(o,"|").concat(u),mine:!0,open:!1,value:15,mark:0},l--)}return p(n,e),{type:i.BUILD,action:n,amountOfMines:t}},p=function(e,a){for(var t=0;t<a;t++)for(var n=0;n<a;n++)try{e[t][n].mine&&(0===t?0===n?(e[t][n+1].value+=1,e[t+1][n].value+=1,e[t+1][n+1].value+=1):n===e.length-1?(e[t][n-1].value+=1,e[t+1][n].value+=1,e[t+1][n-1].value+=1):(e[t][n-1].value+=1,e[t][n+1].value+=1,e[t+1][n].value+=1,e[t+1][n-1].value+=1,e[t+1][n+1].value+=1):t===e.length-1?0===n?(e[t][n+1].value+=1,e[t-1][n].value+=1,e[t-1][n+1].value+=1):n===e.length-1?(e[t][n-1].value+=1,e[t-1][n].value+=1,e[t-1][n-1].value+=1):(e[t][n-1].value+=1,e[t][n+1].value+=1,e[t-1][n].value+=1,e[t-1][n-1].value+=1,e[t-1][n+1].value+=1):0===n?(e[t-1][n].value+=1,e[t+1][n].value+=1,e[t][n+1].value+=1,e[t-1][n+1].value+=1,e[t+1][n+1].value+=1):n===e.length-1?(e[t-1][n].value+=1,e[t+1][n].value+=1,e[t][n-1].value+=1,e[t-1][n-1].value+=1,e[t+1][n-1].value+=1):(e[t-1][n+1].value+=1,e[t-1][n].value+=1,e[t-1][n-1].value+=1,e[t+1][n+1].value+=1,e[t+1][n].value+=1,e[t+1][n-1].value+=1,e[t][n+1].value+=1,e[t][n-1].value+=1))}catch(l){}},O=function(e,a,t){var n=0,l=0,r=a*a,c=Math.floor(t);return e.map((function(e){e.map((function(e){e.mine?1==!e.mark&&(n=1):e.open&&l++}))})),l=r-l,n&&c!==l?{type:i.EMPTY}:{type:i.FINISH}},j="TIME",g="RESTART_GAME",h="PAUSE",C="LOADING",k="SETTINGS",I=function(){return{type:g}},N=function(){return{type:C}},y=function(e){var a=1===e?0:1;return{type:h,payload:a}},L=function(e){return{type:k,payload:1===e?0:1}},M=t(2),S=t(17),_=function(e){var a=Object(u.c)((function(e){return e.board})),t=Object(u.b)(),r=e.cell.open?e.cell.value>=15?l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}):0===e.cell.value?null:e.cell.value:1===e.mark?l.a.createElement("i",{className:"fa fa-flag","aria-hidden":"true"}):2===e.mark?l.a.createElement("i",{className:"fa fa-question","aria-hidden":"true"}):null,c={color:e.cell.value>=15&&e.cell.open?"black":1===e.cell.value&&e.cell.open?"#047933":2===e.cell.value&&e.cell.open?"#0c0398":3===e.cell.value&&e.cell.open?"red":e.cell.open||1!==e.cell.mark?e.cell.open||2!==e.cell.mark?"black":"#dbce23":"#e50808",backgroundColor:e.cell.mine&&e.cell.open?"red":"green"},o=Object(n.useState)({longpress:250,start:0}),i=Object(S.a)(o,2),E=i[0],d=i[1],p=function(e){e.preventDefault(),e=e||window.event;var a=(new Date).getTime();d(Object(M.a)(Object(M.a)({},E),{},{start:a}))},j=function(n){if(n.preventDefault(),n=n||window.event,(new Date).getTime()>=E.start+E.longpress)(a.amountOfMines>0||"fa fa-flag"===n.target.className)&&t(m(e.cell.id)),1===e.cell.mark?t(v()):2===e.cell.mark&&t(f());else switch(window.event.which){case 0:case 1:t(s(e.cell.id)),t(b(e.cell.id,e.board.board)),t(O(a.board,a.size,a.amountOfMines));break;case 3:(a.amountOfMines>0||"fa fa-flag"===n.target.className)&&t(m(e.cell.id)),1===e.cell.mark&&a.amountOfMines>0?t(v()):2===e.cell.mark&&t(f());break;default:return-1}};return l.a.createElement("button",{onTouchStart:p,onTouchEnd:j,onMouseDown:p,onMouseLeave:function(e){e.preventDefault(),e=e||window.event,d(Object(M.a)(Object(M.a)({},E),{},{start:0}))},onMouseUp:j,disabled:e.cell.open,style:c,className:1===e.cell.mark?"btn flag":2===e.cell.mark?"btn question":"btn regular"},r)},A=function(e){var a=Object(u.c)((function(e){return e.board})),t=(Object(u.c)((function(e){return e.setting})),Object(u.b)());Object(n.useEffect)((function(){return 0===a.time&&(t(N()),t(d(a.size,a.lvl)),t(N())),function(){return null}}),[a.lvl,a.size]),Object(n.useEffect)((function(){(a.amountOfMines<=1||a.amountCellShouldBeOpen<=1)&&t(O(a.board,a.size,a.amountOfMines))}),[a.amountOfMines]);var r=a.board.map((function(e,n){return l.a.createElement("div",{className:"row",key:n},e.map((function(e,n){return l.a.createElement("div",{className:"cell",key:n,id:e.id},l.a.createElement(_,{board:a,value:e.value,mark:e.mark,cell:e,clicked:function(){return t(s(e.id))},rightClicked:function(){return t(m(e.id))}}))})))}));return l.a.createElement("div",null,l.a.createElement("div",{className:"board"},r))},D=t(65),T=function(e){return l.a.createElement(D.a,{size:"small",variant:"outlined",color:"primary",className:"settingBtn",onClick:e.onclick},e.text)},w=function(){var e=Object(u.c)((function(e){return e.setting})),a=Object(u.c)((function(e){return e.board})),t=Object(u.b)(),r=Object(n.useState)({close:1}),c=Object(S.a)(r,2);c[0],c[1];Object(n.useEffect)((function(){var a=null;return e.pause||(a=setInterval((function(){t({type:j})}),1e3)),function(){return clearInterval(a)}}),[e.pause]);var o=0===e.pause?l.a.createElement(D.a,{size:"small",variant:"contained",color:"primary",className:"settings-toggle",onClick:function(){t(y(e.pause))}},"Settings"):l.a.createElement(l.a.Fragment,null,l.a.createElement(T,{text:"Pause",onclick:function(){return t(y(e.pause))}}),l.a.createElement(T,{text:"Start over",onclick:function(){return t(d(e.size,e.lvl)),void t(I())}}),l.a.createElement(T,{text:"Change level",onclick:function(){return t(L(e.settings))}}),l.a.createElement(D.a,{size:"small",variant:"outlined",color:"primary",className:"settings-toggle",onClick:function(){t(y(e.pause))}},"close"));return l.a.createElement("div",null,l.a.createElement("div",{className:"stats"},l.a.createElement("div",{className:"stats-time"},e.time),l.a.createElement("div",{className:"stats-minesLeft"},parseFloat(a.amountOfMines).toFixed(0))),o)},R=function(){Object(u.c)((function(e){return e.setting}));var e=Object(u.c)((function(e){return e.board})),a=Object(u.b)();return l.a.createElement("div",{className:"failed"},l.a.createElement("h2",null,"YOU SUCK... AND DEAD!"),l.a.createElement("h3",null,"game over! start over?"),l.a.createElement("button",{className:"startOverBtn",onClick:function(){a(d(e.size,e.lvl)),a(I())}},"Play Again"))},z=t(66),H=function(){var e=Object(u.c)((function(e){return e.setting})),a=Object(u.c)((function(e){return e.board})),t=Object(u.b)(),r=Object(n.useState)({lvl:a.lvl,size:a.size}),c=Object(S.a)(r,2),o=c[0],s=c[1];return l.a.createElement("div",{className:"settings"},l.a.createElement("div",{className:"settingsItem"},"size: ",o.size,l.a.createElement(z.a,{defaultValue:a.size,step:1,marks:!0,min:5,max:20,onChange:function(e,a){s(Object(M.a)(Object(M.a)({},o),{},{size:a}))}})),l.a.createElement("div",{className:"settingsItem"},"lvl: ",o.lvl,l.a.createElement(z.a,{defaultValue:a.lvl,step:1,marks:!0,min:1,max:3,valueLabelDisplay:"auto",onChange:function(e,a){s(Object(M.a)(Object(M.a)({},o),{},{lvl:a}))}})),l.a.createElement("div",{className:"saveChanges-btn"},l.a.createElement(T,{text:"Save",onclick:function(){var a,n;t((a=o.size,n=o.lvl,{type:i.SAVE_CHANGE,size:a,lvl:n})),t(y(e.pause)),t(L(e.settings))}})))};var F=function(){var e=Object(u.c)((function(e){return e.setting})),a=Object(u.c)((function(e){return e.board})),t=function(){var t=null;return 1===e.pause&&(t=l.a.createElement("div",null,"pause")),1===a.fail&&(t=l.a.createElement(R,null)),1===a.finish&&(t=l.a.createElement("h1",null,"you did it!! you stayed alive!")),t}(),n=l.a.createElement("div",{className:"loading"},l.a.createElement(o.a,null)),r=e.settings?l.a.createElement(H,null):null;return l.a.createElement("div",{className:"App"},r,e.isLoading?n:t,e.isLoading?null:l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(A,null)," "))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=t(15),K=t(31),U={board:[],amountOfMines:5,lvl:1,size:9,fail:0,time:0,pause:0,finish:0,settings:0},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case i.BUILD:return Object(M.a)(Object(M.a)({},e),{},{board:a.action,amountOfMines:a.amountOfMines,fail:0});case i.CLICKED:var t=e.board,n=a.action[0],l=a.action[1],r=e.board[n].filter((function(e){return e.id==="".concat(n,"|").concat(l)}));if(1!==r[0].mark){r[0].open=!0,t[n][l]=Object(M.a)(Object(M.a)({},t[n][l]),{},{open:!0});var c=e.amountCellShouldBeOpen-1;return Object(M.a)(Object(M.a)({},e),{},{board:t,amountCellShouldBeOpen:c})}return Object(M.a)({},e);case i.RIGHT_CLICKED:var o=e.board,u=a.action[0],s=a.action[1],m=e.board[u].filter((function(e){return e.id==="".concat(u,"|").concat(s)}));return m[0].mark+=1,m[0].mark>2&&(m[0].mark=0),o[u][s]=Object(M.a)(Object(M.a)({},o[u][s]),{},{mark:m[0].mark}),Object(M.a)(Object(M.a)({},e),{},{board:o});case i.CHECK_CELL:return Object(M.a)(Object(M.a)({},e),{},{board:a.payload});case i.REDUCE_MINE_LEFT:return Object(M.a)(Object(M.a)({},e),{},{amountOfMines:e.amountOfMines-1});case i.INCREASE_MINE_LEFT:return Object(M.a)(Object(M.a)({},e),{},{amountOfMines:e.amountOfMines+1});case i.SAVE_CHANGE:return Object(M.a)(Object(M.a)({},e),{},{size:a.size,lvl:a.lvl});case i.FAILED:var v=1;return Object(M.a)(Object(M.a)({},e),{},{fail:v});case i.FINISH:var f=1;return Object(M.a)(Object(M.a)({},e),{},{finish:f});default:return Object(M.a)({},e)}},x={time:0,pause:0,restart:0,success:0,isLoading:0,settings:0},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:var t=!e.isLoading;return Object(M.a)(Object(M.a)({},e),{},{isLoading:t});case j:var n=e.time+1;return Object(M.a)(Object(M.a)({},e),{},{time:n});case g:return Object(M.a)(Object(M.a)({},e),{},{time:0,pause:0,restart:0,success:0,isLoading:0});case h:var l=a.payload;return Object(M.a)(Object(M.a)({},e),{},{pause:l});case k:var r=a.payload;return Object(M.a)(Object(M.a)({},e),{},{settings:r});default:return Object(M.a)({},e)}},P=t(32),Y=Object(G.combineReducers)({setting:V,board:B}),W=Object(G.createStore)(Y,Object(P.composeWithDevTools)(Object(G.applyMiddleware)(K.a)));c.a.render(l.a.createElement(u.a,{store:W},l.a.createElement(l.a.StrictMode,null,l.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.cec331a3.chunk.js.map